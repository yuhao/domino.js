<script>
'use strict';

var global = this; // window

this.din = (function(){
  if (global.din) {
    console.warn("DIN has been initialized before");
    return global.din;
  }

  var gid = 0;

  function exportTo(namespace, func) {
    din[namespace] = func();
  }

  function init() {
    Object.defineProperty(Node.prototype, "gid", {
      configurable: false,
      enumerable: false,
      get: function() {
        if (this._gid === undefined) {
          Object.defineProperty(this, "_gid", {
            configurable: false,
            enumerable: false,
            value: gid++,
            writable: true
          });
        }
        return this._gid;
      }
    });

    Object.toType = function(obj) {
      if (obj instanceof HTMLObjectElement)
        return "object";

      if (obj === null)
        return "null";

      return typeof obj;
    }
  }

  return {
    exportTo: exportTo,
    init: init
  }
})();

</script>
