<script>

din.exportTo("inspect", function(){
  /*
    Inspector instance
  */
  function instance(name, enabled) {
    this.name = name;
    if (enabled === undefined)
      this.enableInstrument = true;
    else
      this.enableInstrument = enabled;
  }

  instance.prototype = {
    on: function(name, func) {
      if (this.hasOwnProperty(name))
        throw name+" has already be registered in "+this.name+"!";
      this[name] = func;
    }
  }

  /*
    Inspector methods
  */
  function funcEntry(target, thisArg, argumentsList) {
    var inspector = din.inspect.inspector;
    if (inspector && inspector.funcEntry) {
      inspector.funcEntry.apply(this, arguments);
    }
  }

  function funcExit(target, thisArg, argumentsList, returnVal) {
    var inspector = din.inspect.inspector;
    if (inspector && inspector.funcExit) {
      inspector.funcExit.apply(this, arguments);
    }
  }

  function objBeforeGet(target, name) {
    var inspector = din.inspect.inspector;
    if (inspector && inspector.objBeforeGet) {
      inspector.objBeforeGet.apply(this, arguments);
    }
  }

  function objAfterGet(target, name, value) {
    var inspector = din.inspect.inspector;
    if (inspector && inspector.objAfterGet) {
      inspector.objAfterGet.apply(this, arguments);
    }
  }

  function objBeforeSet(target, name, val) {
    var inspector = din.inspect.inspector;
    if (inspector && inspector.objBeforeSet) {
      inspector.objBeforeSet.apply(this, arguments);
    }
  }

  function objAfterSet(target, name, val) {
    var inspector = din.inspect.inspector;
    if (inspector && inspector.objAfterSet) {
      inspector.objAfterSet.apply(this, arguments);
    }
  }

  function callbackEntry(triggeringEvent, callback) {
    var inspector = din.inspect.inspector;
    if (inspector && inspector.callbackEntry) {
      inspector.callbackEntry.apply(this, arguments);
    }
  }

  function callbackExit(triggeringEvent, callback) {
    var inspector = din.inspect.inspector;
    if (inspector && inspector.callbackExit) {
      inspector.callbackExit.apply(this, arguments);
    }
  }

  function timeoutCbEntry(callback, arglist) {
    var inspector = din.inspect.inspector;
    if (inspector && inspector.timeoutCbEntry) {
      inspector.timeoutCbEntry.apply(this, arguments);
    }
  }

  function timeoutCbExit(callback, arglist, returnVal) {
    var inspector = din.inspect.inspector;
    if (inspector && inspector.timeoutCbExit) {
      inspector.timeoutCbExit.apply(this, arguments);
    }
  }

  function intervalCbEntry(callback, arglist) {
    var inspector = din.inspect.inspector;
    if (inspector && inspector.intervalCbEntry) {
      inspector.intervalCbEntry.apply(this, arguments);
    }
  }

  function intervalCbExit(callback, arglist, returnVal) {
    var inspector = din.inspect.inspector;
    if (inspector && inspector.intervalCbExit) {
      inspector.intervalCbExit.apply(this, arguments);
    }
  }

  return {
    instance: instance,
    funcEntry: funcEntry,
    funcExit: funcExit,
    objBeforeGet: objBeforeGet,
    objAfterGet: objAfterGet,
    objBeforeSet: objBeforeSet,
    objAfterSet: objAfterSet,
    callbackEntry: callbackEntry,
    callbackExit: callbackExit,
    timeoutCbEntry: timeoutCbEntry,
    timeoutCbExit: timeoutCbExit,
    intervalCbEntry: intervalCbEntry,
    intervalCbExit: intervalCbExit
  }
});

</script>
