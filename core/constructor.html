<link rel="import" href="/domino.js/core/proxy.html">

<script>

din.exportTo("instrument", function(){
  function instrumentMutationObserver() {
    var _observe = MutationObserver.prototype.observe;
    MutationObserver.prototype.observe = function observe() {
      var target = arguments[0];
      if (target.hasOwnProperty("_proxy"))
        arguments[0] = target._src;
      _observe.apply(this, arguments);
    }
  }

  function instrumentConstructor() {
    instrumentMutationObserver();
  }

  return {
    instrumentConstructor: instrumentConstructor
  }
});

</script>
